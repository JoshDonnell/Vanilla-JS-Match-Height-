export default class h{constructor(e,t=null,l=!0,i=0){this.element=e,this.parent=t,this.byrow=l,this.timeout=i,this.elements={},e?(window.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{this.reset()},this.timeout)}),window.addEventListener("resize",()=>{setTimeout(()=>{this.update()},200)})):console.error("\u26D4 Missing class name in new MatchHeight()")}findElements(){if(this.parent&&document.querySelectorAll(this.parent))document.querySelectorAll(this.parent).forEach(e=>{let t=e.querySelectorAll(this.element);this.elements.push(t),this.findRows(t,e)});else{let e=document.querySelectorAll(this.element);this.elements.push(e),this.findRows(e)}}findRows(e,t=null){if(e.length){let l=[];e.forEach(s=>{let n=0;this.byrow&&(n=Math.round(s.getBoundingClientRect().top+window.scrollY)),l.push({offset:n,parent:t,elements:{element:s}})});const i=new Map(l.map(({offset:s,elements:n})=>[s,{offset:s,elements:[]}]));for(let{offset:s,elements:n}of l)i.get(s).elements.push(...[n].flat());this.setHeights([...i.values()])}}setHeights(e){e.length&&e.forEach(t=>{let l=[];t.elements.forEach(s=>{let n=s.element;n.style.height=null,l.push(n.offsetHeight)});let i=Math.max.apply(Math,l);t.elements.forEach(s=>{s.element.style.height=i+"px"})})}update(){this.elements.length?this.elements.forEach(e=>{this.findRows(e)}):console.error(`\u26D4 Can't trigger update as no elements found for the MatchHeight element ${this.element}`)}reset(){this.elements=[],this.findElements()}debug(){setTimeout(()=>{this.elements?this.elements.forEach((e,t)=>{console.log(this.element+" Group "+(t+1)),e.forEach(l=>{console.log(l)}),console.log(`

`)}):console.log(`\u26D4 No cached MatchHeight elements found for "${this.element}" 

 Make sure this element exists on the current page.`)},500)}}
